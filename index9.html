<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ゲームの埋め込みとフルスクリーン</title>
  <style>
    /* 背景画像を設定 */
    body {
      background-image: url('ブロスタ.jpg'); /* 画像のURLを指定 */
      background-size: cover; /* 背景画像を画面いっぱいに広げる */
      background-position: center; /* 画像の中央を表示 */
      background-repeat: no-repeat; /* 画像の繰り返しを無効に */
      margin: 0; /* ページの余白を削除 */
      height: 100vh; /* ビューポートの高さを100%に */
      overflow: hidden; /* スクロールを無効に */
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative; /* 戻るボタンを絶対位置で配置するために必要 */
    }

    /* ゲームを表示する枠 */
    .game-container {
      width: 800px; /* 固定の幅 */
      height: 500px; /* 固定の高さ */
      border: 5px solid #333; /* 枠の線 */
      position: relative;
      background-color: white; /* ゲーム枠の背景を白に設定（任意） */
    }

    /* iframeを枠いっぱいに広げる */
    #game-frame {
      width: 100%; /* 親要素に合わせて幅を100% */
      height: 100%; /* 親要素に合わせて高さを100% */
      border: 0; /* iframeの枠線を消す */
    }

    /* 戻るボタンのスタイル */
    .back-button {
      position: absolute;
      top: 10px; /* 上からの距離 */
      right: 10px; /* 右からの距離 */
      padding: 10px 20px;
      background-color: rgba(0, 0, 0, 0.5); /* 半透明の背景 */
      color: white; /* 文字色 */
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 10; /* ゲーム枠の上に表示 */
    }

    .back-button:hover {
      background-color: rgba(0, 0, 0, 0.8); /* ホバー時に背景色を変更 */
    }
  </style>
</head>
<body>

  <!-- 戻るボタン -->
  <button class="back-button" onclick="goBack()">戻る</button>

  <!-- ゲームを表示する枠 -->
  <div class="game-container" id="game-container">
    <iframe src="テトクマテスト2 3.html" frameborder="0" id="game-frame"></iframe>
  </div>

  <script>
    const gameContainer = document.getElementById('game-container');

    // 初期のサイズを設定（固定）
    const initialWidth = 800;
    const initialHeight = 500;

    // ゲーム枠のサイズを元のサイズに戻す関数
    function resetGameContainerSize() {
      gameContainer.style.width = `${initialWidth}px`;
      gameContainer.style.height = `${initialHeight}px`;
      gameContainer.style.border = "5px solid #333"; // 枠線を再表示
    }

    // フルスクリーンに切り替える関数
    function enterFullscreen() {
      gameContainer.style.width = "100%";
      gameContainer.style.height = "100vh"; // 画面の高さを100%に
      gameContainer.style.border = "none"; // 枠を消す

      if (gameContainer.requestFullscreen) {
        gameContainer.requestFullscreen();
      } else if (gameContainer.mozRequestFullScreen) { // Firefox
        gameContainer.mozRequestFullScreen();
      } else if (gameContainer.webkitRequestFullscreen) { // Chrome, Safari, Edge
        gameContainer.webkitRequestFullscreen();
      } else if (gameContainer.msRequestFullscreen) { // IE/Edge
        gameContainer.msRequestFullscreen();
      }
    }

    // フルスクリーン解除する関数
    function exitFullscreen() {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) { // Firefox
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) { // Chrome, Safari, Edge
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { // IE/Edge
        document.msExitFullscreen();
      }

      resetGameContainerSize(); // フルスクリーン解除後に元のサイズに戻す
    }

    // フルスクリーン状態を管理するためのフラグ
    let isFullscreen = false;

    // エスケープキーでフルスクリーンを切り替え
    window.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        if (isFullscreen) {
          exitFullscreen(); // フルスクリーン解除
        } else {
          enterFullscreen(); // フルスクリーンに切り替え
        }
        isFullscreen = !isFullscreen; // フルスクリーン状態を切り替え
      }
    });

    // フルスクリーンの変更を監視し、状態を更新
    document.addEventListener('fullscreenchange', function() {
      if (!document.fullscreenElement) {
        isFullscreen = false; // フルスクリーン解除
      } else {
        isFullscreen = true; // フルスクリーン中
      }
    });

    // 戻るボタンがクリックされたときに指定URLに遷移
    function goBack() {
      window.location.href = 'index3.html';  // 任意のURLに変更
    }
  </script>

</body>
</html>
